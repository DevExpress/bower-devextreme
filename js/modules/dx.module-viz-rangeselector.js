/*! 
* DevExtreme (Range Selector)
* Version: 14.2.7
* Build date: Apr 17, 2015
*
* Copyright (c) 2011 - 2014 Developer Express Inc. ALL RIGHTS RESERVED
* EULA: https://www.devexpress.com/Support/EULAs/DevExtreme.xml
*/
"use strict";if(!DevExpress.MOD_VIZ_RANGESELECTOR){if(!DevExpress.MOD_VIZ_CORE)throw Error("Required module is not referenced: viz-core");(function(n){n.viz.rangeSelector={utils:{}}})(DevExpress),function(n,t,i){var o=t.viz.rangeSelector,r=o.utils,f=t.utils,e=-1e3,u=function(n,t){var u;if(!n||n.length===0)return-1;for(var r=0,i=n.length-1,u=0;i-r>1;)u=r+i>>1,n[u]>t?i=u:r=u;return n[i]<=t?i:r},s=function(n,t){var i=u(n,t);return n&&i>=0&&i<n.length?n[i]:t},h=function(n,t){var i=u(n,t);return n&&i>=0&&i<n.length?(i+1<n.length&&(f.isDate(t)?n[i+1].getTime()-t.getTime()<t.getTime()-n[i].getTime()&&i++:n[i+1]-t<t-n[i]&&i++),n[i]):t},c=function(n,t){var i=u(n,t);return n&&i>=0&&i<n.length?(n[i]<t&&i+1<n.length&&i++,n[i]):t},l=function(n){return f.getRootOffset(n).left||0},a=function(n){var t=0;return n.pageX?t=n.pageX:n.originalEvent&&n.originalEvent.pageX&&(t=n.originalEvent.pageX),n.originalEvent&&n.originalEvent.touches&&(n.originalEvent.touches.length>0?t=n.originalEvent.touches[0].pageX:n.originalEvent.changedTouches.length>0&&(t=n.originalEvent.changedTouches[0].pageX)),t},v=function(n,t,i){var r=n.text(t,e,e).css(i).append(n.root),u=r.getBBox();return r.remove(),u},y=function(t,r){var s=r.type==="discrete",c=s?r._categoriesInfo.categories:i,u=r.startValue,f=r.endValue,e,o,h;return s?(h=n.inArray(t,c),h<0?u:t):(e=u>f?f:u,o=u>f?u:f,t<e&&(t=e),t>o&&(t=o),t)};r.findLessOrEqualValue=s,r.findNearValue=h,r.findGreaterOrEqualValue=c,r.getRootOffsetLeft=l,r.getEventPageX=a,r.getTextBBox=v,r.truncateSelectedRange=y}(jQuery,DevExpress),function(){DevExpress.viz.rangeSelector.baseVisualElementMethods={init:function(n){this._renderer=n,this._isDrawn=!1},applyOptions:function(n){this._options=n||{},this._applyOptions(this._options)},_applyOptions:function(){},redraw:function(n){var t=this;t._isDrawn?t._update(n||t._group):(t._isDrawn=!(t._draw(n||t._group)===!1),n&&(t._group=n))},isDrawn:function(){return!!this._isDrawn},isInitialized:function(){return!!this._options},_draw:function(){},_update:function(n){n.clear(),this._draw(n)}}}(DevExpress),function(n,t,i){function h(n){return{startValue:n.startValue,endValue:n.endValue}}var u=t.viz.rangeSelector,f=t.utils,ot=t.data.utils,s=u.utils,e=t.viz.core,st=e.ParseUtils,y=t.formatHelper,ht=5,r=f.isDefined,o=f.isNumber,c=f.isDate,l=Math.max,p=Math.ceil,g=n.extend,w="startValue",nt="endValue",a="datetime",b="selectedRange",k="discrete",v="string",tt={size:i,margin:{left:0,top:0,right:0,bottom:0},scale:{showCustomBoundaryTicks:!0,showMinorTicks:!0,startValue:i,endValue:i,minorTickCount:i,minorTickInterval:i,majorTickInterval:i,useTicksAutoArrangement:!0,setTicksAtUnitBeginning:!0,minRange:i,maxRange:i,placeholderHeight:i,valueType:i,label:{visible:!0,format:i,precision:i,customizeText:i},marker:{visible:!0,label:{format:i,precision:i,customizeText:i}},logarithmBase:10},selectedRange:i,sliderMarker:{visible:!0,format:i,precision:i,customizeText:i,placeholderSize:i},behavior:{snapToTicks:!0,animationEnabled:!0,moveSelectedRangeByClick:!0,manualRangeSelectionEnabled:!0,allowSlidersSwap:!0,callSelectedRangeChanged:"onMovingComplete"},background:{color:"#C0BAE1",visible:!0,image:{url:i,location:"full"}},dataSource:i,dataSourceField:"arg",redrawOnResize:!0,theme:i,selectedRangeChanged:null};u.consts={emptySliderMarkerText:". . ."},u.formatValue=function(n,t){var i={value:n,valueText:y.format(n,t.format,t.precision)};return String(f.isFunction(t.customizeText)?t.customizeText.call(i,i):i.valueText)};var ct=function(n){return u.rangeSelectorFactory.createRangeContainer(n)},lt=function(n,t){return{x:e.CoreFactory.createTranslator2D(n.arg,t,{direction:"horizontal"}),y:e.CoreFactory.createTranslator2D(n.val,t)}},at=function(n,t,i){return{left:t.left,top:t.top,right:n.width-t.width-t.left,bottom:n.height-t.height-t.top+i,width:n.width,height:n.height}},it=function(n,t,r){var e=t===i?u.consts.emptySliderMarkerText:u.formatValue(t,r),f=s.getTextBBox(n,e,r.font);return{width:p(f.width)+2*r.padding,height:p(f.height)+2*r.padding+r.pointerSize}},rt=function(n,t,i){var r=u.formatValue(t,i.label),f=s.getTextBBox(n,r,i.label.font);return p(f.width/2)},vt=function(n,t,i){var r={left:t.left+i.left,top:t.top+i.top,width:n.width-t.left-t.right-i.left-i.right,height:n.height-t.top-t.bottom-i.top-i.bottom};return r.width<=0&&(r.width=1),r},yt=function(n){var t,i,r;return o(n)?t=i=r=n:n&&(o(n.height)&&(r=n.height),o(n.width)?t=i=n.width:n.width&&(o(n.width.left)&&(t=n.width.left),o(n.width.right)&&(i=n.width.right))),{widthLeft:t,widthRight:i,height:r}},pt=function(n,t,i,r){var s,a=0,v=0,h,u=0,f=0,e=0,o,c;return o=yt(r.placeholderSize),u=o.widthLeft||0,f=o.widthRight||0,e=o.height||0,r.visible&&(s=it(n,i.startValue,r),h=it(n,i.endValue,r),c=l(s.width,h.width),u||(u=c),f||(f=c),e||(e=l(s.height,h.height))),i.label.visible&&(a=rt(n,i.startValue,i),v=rt(n,i.endValue,i)),u=l(u,a),f=l(f,v),{left:u,right:f,top:e,bottom:0}},ti=function(n){n&&n.empty()},wt=function(n){return u.rangeSelectorFactory.createThemeManager(n)},ut=function(t,i){var u=n.type(t),f=n.type(i),r=function(n){return u===n||f===n};return r("date")?a:r("number")?"numeric":r(v)?v:""},bt=function(n){return n.valueType===a&&n.marker.visible},kt=function(n,t){var i=t.minorTickInterval||t.majorTickInterval;t.valueType==="datetime"&&(i=f.convertDateTickIntervalToMilliseconds(i)),n=n.arg.addRange({interval:i})},d=function(n){return new e.Range(n)},ft=function(n,t,r){n&&(n.type==="logarithmic"&&n.logarithmBase<=0||n.logarithmBase&&!o(n.logarithmBase)?(n.logarithmBase=t,r("E2104")):n.type!=="logarithmic"&&(n.logarithmBase=i))},dt=function(n,t,i){var r,u="0",e={value:0,valueText:u},o=f.isFunction(t.label.customizeText)?t.label.customizeText.call(e,e):u,h=t.label.visible;return t.placeholderHeight?t.placeholderHeight:(r=s.getTextBBox(n,o,t.label.font),(h?t.label.topIndent+r.height:0)+(i?t.marker.topIndent+t.marker.separatorHeight:0))},gt=function(n,t,i,r,u,f){var s=n._categoriesInfo,o=e.CoreFactory.createTickManager({axisType:n.type,dataType:n.valueType},{min:u,max:f,screenDelta:t,customTicks:s&&s.categories},{labelOptions:{},boundCoef:1,minorTickInterval:n.minorTickInterval,tickInterval:n.majorTickInterval,incidentOccured:i,base:n.logarithmBase,showMinorTicks:!0,withMinorCorrection:!0,stick:r!==!1});return o.getTicks(!0),{majorTickInterval:o.getTickInterval(),minorTickInterval:o.getMinorTickInterval(),bounds:o.getTickBounds()}},ni=function(n,t){var s,h,v=!1,p,u=t.startValue,e=t.endValue,a,o,l=n?n.getBoundRange():{arg:d(),val:d({isValueRange:!0})},y;return t.type===k&&(y=d({categories:t.categories||(!n&&u&&e?[u,e]:i),startCategories:u,endCategories:e}),y.addRange(l.arg),l.arg=y,a=y.categories||[],t._categoriesInfo=o=f.getCategoriesInfo(a,u||a[0],e||a[a.length-1])),r(u)&&r(e)?(v=t.inverted=o?o.inverted:u>e,s=o?o.start:v?e:u,h=o?o.end:v?u:e):r(u)||r(e)?(s=u,h=e):o&&(s=o.start,h=o.end),p=c(s)&&c(h)&&s.getTime()===h.getTime(),s===h||p||l.arg.addRange({invert:v,min:s,max:h,minVisible:s,maxVisible:h,dataType:t.valueType}),l.arg.addRange({base:t.logarithmBase,axisType:t.type}),l.arg.isDefined()||(p&&(t.valueType="numeric"),l.arg.setStubData(t.valueType)),l},et=function(n,t){return!r(n)||!r(t)};t.registerComponent("dxRangeSelector",u,e.BaseWidget.inherit({_setDefaultOptions:function(){this.callBase(),this.option(tt)},_eventsMap:n.extend({},e.BaseWidget.prototype._eventsMap,{onSelectedRangeChanged:{name:"selectedRangeChanged",deprecated:"selectedRangeChanged",deprecatedContext:function(){return null},deprecatedArgs:function(n){return[h(n)]}},selectedRangeChanged:{newName:"onSelectedRangeChanged"}}),_setDeprecatedOptions:function(){this.callBase(),n.extend(this._deprecatedOptions,{selectedRangeChanged:{since:"14.2",message:"Use the 'onSelectedRangeChanged' option instead"}})},_dataSourceOptions:function(){return{paginate:!1,_preferSync:!0}},_dataIsReady:function(){return this._isDataSourceReady()},_initCore:function(){var n=this;n.rangeContainer=ct(n._renderer),n._reinitDataSource()},_getRendererParameters:function(){return{pathModified:this.option("pathModified"),rtl:this.option("rtlEnabled")}},_getDefaultSize:function(){return{width:400,height:160}},_getOption:function(n){return this.option(n)},_reinitDataSource:function(){this._refreshDataSource()},_disposeCore:function(){var n=this,t=function(t){n[t]&&n[t].dispose(),n[t]=null};n.callBase(),t("renderer"),n.translators=null,t("rangeContainer")},_initOptions:function(n){var t=this,i;t._optionsInitializing=!0,n=n||{},t._userOptions=g(!0,{},n),i=wt(n.theme),i.setBackgroundColor(n.containerBackgroundColor),t.option(i.applyRangeSelectorTheme(n)),t._prepareChartThemeOptions(n),n.background&&(t._userBackgroundColor=n.background.color)},_refresh:function(){var n=this,t=n.callBase;n._endLoading(function(){t.call(n)})},_render:function(n){var t=this,r,i;n=n||t.__isResizing,t._optionsInitializing=!1,t._applyOptions(),n?(i=t.option("behavior"),r=i.animationEnabled,i.animationEnabled=!1,t.rangeContainer.redraw(),i.animationEnabled=r):t.rangeContainer.redraw(),!n&&(!t._dataSource||t._dataSource&&t._dataSource.isLoaded())&&t.hideLoadingIndicator(),t._drawn()},_optionChanged:function(n){var t=this,i=n.name;t._optionsInitializing||ot.compileSetter(i)(t._userOptions,n.value,{functionsAsIs:!0,merge:!0}),i==="dataSource"?t._reinitDataSource():i==="selectedRange"?t.setSelectedRange(t.option(b)):i==="containerBackgroundColor"||i==="theme"?(t._initOptions(t._userOptions),t._invalidate()):t.callBase(n)},_applySize:n.noop,_resize:function(){this._render(!0)},_dataSourceChangedHandler:function(){var n=this;n._endLoading(function(){n._renderer.drawn&&n._render()})},_applyOptions:function(){var n=this,u,i,f,e,r=n._canvas,o,s,c,l=n.container,t;n._isUpdating=!0,i=n._createSeriesDataSource(),t=n._scaleOptions=n._prepareScaleOptions(i),f=ni(i,t),n._updateScaleOptions(i,f.arg,r.width),kt(f,t),s=n._prepareSliderMarkersOptions(r.width),c=n._initSelection(),o=pt(n._renderer,r,t,s),u=vt(r,r,o),e=dt(n._renderer,t,bt(t)),n.translators=lt(f,at(r,u,e)),t.ticksInfo=n._getTicksInfo(u.width),i&&i.adjustSeriesDimensions(n.translators),n.rangeContainer.applyOptions({canvas:u,scaleLabelsAreaHeight:e,sliderMarkerSpacing:o,translators:n.translators,selectedRange:c,scale:t,behavior:n.option("behavior"),background:n.option("background"),chart:n.option("chart"),seriesDataSource:i,sliderMarker:s,sliderHandle:n.option("sliderHandle"),shutter:n.option("shutter"),selectedRangeChanged:function(t,i){n.option(b,t),i||n._eventTrigger("selectedRangeChanged",h(t))},setSelectedRange:function(t){n.setSelectedRange(t)}}),n._isUpdating=!1},_initSelection:function(){var u=this,n=u._scaleOptions,f=u.option(b),t,i,o=n.parser||function(){return null},e=function(t,i){var f,e=n[i];return r(t)&&(f=o(t)),r(f)?e=f:u._incidentOccured("E2203",[i]),e};return f?(t=e(f.startValue,w),t=s.truncateSelectedRange(t,n),i=e(f.endValue,nt),i=s.truncateSelectedRange(i,n),{startValue:t,endValue:i}):h(n)},_prepareChartThemeOptions:function(n){var t,i=this.option("chart")||{};!i.theme&&n&&n.theme&&(t=n.theme,t&&(typeof t=="object"&&(t=t.chart||{},t.name=n.theme.name),i.theme=t))},_createSeriesDataSource:function(){var n=this,i,e=n._dataSource&&n._dataSource.items(),t=n.option("scale"),r=n.option("chart")||{},f=t.valueType;return f||(f=ut(t.startValue,t.endValue)),(e||r.series)&&(i=new u.SeriesDataSource({renderer:n._renderer,dataSource:e,valueType:(f||"").toLowerCase(),axisType:t.type,chart:r,dataSourceField:n.option("dataSourceField"),backgroundColor:n._userBackgroundColor,incidentOccured:n._incidentOccured,categories:t.categories}),ft(r.valueAxis,i.themeManager.theme().valueAxis.logarithmBase,n._incidentOccured)),i},_prepareScaleOptions:function(t){var e=this,u=n.extend(!0,{},e.option("scale")),l=e._incidentOccured,s=0,h=new st,f=h.correctValueType((u.valueType||"").toLowerCase()),o,c=function(n,t){var f=n===w?"start":"end";r(u[n])&&(s=t(u[n]),r(s)?u[n]=s:(u[n]=i,e._incidentOccured("E2202",[f])))};return t&&(f=t.getCalculatedValueType()||f),f||(f=ut(u.startValue,u.endValue)||"numeric"),(f===v||u.categories)&&(u.type=k,f=v),u.valueType=f,o=h.getParser(f,"scale"),c(w,o),c(nt,o),ft(u,tt.scale.logarithmBase,e._incidentOccured),u.type||(u.type="continuous"),u.parser=o,u},_prepareSliderMarkersOptions:function(n){var u=this,t=u._scaleOptions,i=g(!0,{},u.option("sliderMarker")),e;return i.format||(!u.option("behavior").snapToTicks&&o(t.startValue)&&(e=Math.abs(t.endValue-t.startValue),i.format="fixedPoint",i.precision=f.getSignificantDigitPosition(e/n)),t.valueType===a&&(t.marker.visible?i.format=f.getDateUnitInterval(r(t.minorTickInterval)&&t.minorTickInterval!==0?t.minorTickInterval:t.majorTickInterval):r(t.startValue)&&r(t.endValue)&&(i.format=y.getDateFormatByTickInterval(t.startValue,t.endValue,t.minorTickInterval!==0?t.minorTickInterval:t.majorTickInterval)))),i},_updateScaleOptions:function(n,t,u){var e=this._scaleOptions,v=r(t.minVisible)?t.minVisible:t.min,p=r(t.maxVisible)?t.maxVisible:t.max,s=gt(e,u,this._incidentOccured,t.stick,v,p),o,l,h=e._categoriesInfo;!n||n.isEmpty()||t.stubData||(o=s.bounds,t.addRange(o),e.startValue=e.inverted?o.maxVisible:o.minVisible,e.endValue=e.inverted?o.minVisible:o.maxVisible),h&&(e.startValue=h.start,e.endValue=h.end),l=c(e.startValue)&&c(e.endValue)&&e.startValue.getTime()===e.endValue.getTime()||e.startValue===e.endValue,e.isEmpty=et(e.startValue,e.endValue)||l,e.isEmpty?e.startValue=e.endValue=i:(e.minorTickInterval=s.minorTickInterval,e.majorTickInterval=s.majorTickInterval,e.valueType!==a||r(e.label.format)||(e.label.format=e.marker.visible?f.getDateUnitInterval(e.majorTickInterval):y.getDateFormatByTickInterval(e.startValue,e.endValue,e.majorTickInterval)))},_getStubTicks:function(n){return n.isEmpty=!0,["canvas_position_left","canvas_position_center","canvas_position_right"]},_getTickManagerOptions:function(n,t,r,f){var o=this;return{labelOptions:{},minorTickInterval:t?0:o.option("scale").minorTickInterval,tickInterval:n.majorTickInterval,addMinMax:n.showCustomBoundaryTicks?{min:!0,max:!0}:i,minorTickCount:n.minorTickCount,textOptions:{align:"center",font:n.label.font},textFontStyles:e.utils.patchFontOptions(n.label.font),incidentOccured:o._incidentOccured,isHorizontal:!0,renderText:function(n,t,i,r){return o._renderer.text(n,t,i,r).append(o._renderer.root)},getText:et(r,f)?function(n){return n}:function(t){return u.formatValue(t,n.label)},translate:function(n){return o.translators.x.translate(n)},textSpacing:ht,setTicksAtUnitBeginning:n.setTicksAtUnitBeginning,useTicksAutoArrangement:n.useTicksAutoArrangement,base:n.logarithmBase,stick:!0,showMinorTicks:!0,withMinorCorrection:!0}},_getTicksInfo:function(n){var s=this,t=s._scaleOptions,w=s.translators,h=t.isEmpty,l=w.x.getBusinessRange(),a=t._categoriesInfo,b={axisType:t.type,dataType:t.valueType},i,v=t.startValue,y=t.endValue,d=s._getTickManagerOptions(t,h,v,y),u,f,g,o,p,c;return i={min:h?l.min:v,max:h?l.max:y,screenDelta:n,customTicks:a&&a.categories},o=e.CoreFactory.createTickManager(b,i,d),c=t.type===k?!r(i.min)||!r(i.max):!r(i.min)&&!r(i.max),u=c&&!r(i.customTicks)?s._getStubTicks(t):o.getTicks(!0),f=o.getBoundaryTicks(),p=o.getFullTicks(),f.length&&(u[0].valueOf()===f[0].valueOf()&&u.splice(0,1),u[u.length-1].valueOf()===f[f.length-1].valueOf()&&u.pop()),{majorTicks:u,minorTicks:o.getMinorTicks(),majorTickInterval:o.getTickInterval(),fullTicks:p,customBoundaryTicks:f}},_getContainer:function(){return this.element()},getSelectedRange:function(){return h(this.rangeContainer.slidersContainer.getSelectedRange())},setSelectedRange:function(n){var i=this,t;!i._isUpdating&&n&&((t=i.rangeContainer.slidersContainer.getSelectedRange(),t&&t.startValue===n.startValue&&t.endValue===n.endValue)||i.rangeContainer.slidersContainer.setSelectedRange(n))},resetSelectedRange:function(n){var t=h(this._scaleOptions);t.blockSelectedRangeChanged=n,this.setSelectedRange(t)},render:function(n){var t=this;return t.__isResizing=n,t.callBase.apply(t,arguments),t.__isResizing=null,t}}).include(t.ui.DataHelperMixin))}(jQuery,DevExpress),function(n,t){var r=t.viz.rangeSelector,f=r.baseVisualElementMethods,u,o=function(n){return r.rangeSelectorFactory.createSlidersContainer(n)},s=function(n){return r.rangeSelectorFactory.createScale(n)},h=function(n){return r.rangeSelectorFactory.createRangeView(n)},e=function(n,t){return{left:n.left-t.left,top:n.top-t.top,width:n.width+t.right+t.left,height:n.height+t.bottom+t.top}};u=function(n){f.init.apply(this,arguments),this.slidersContainer=o(n),this.rangeView=h(n),this.scale=s(n)},u.prototype=n.extend({},f,{constructor:u,dispose:function(){this.slidersContainer.dispose(),this.slidersContainer=null},_applyOptions:function(n){var t=this,i=n.scale.isEmpty,r={left:n.canvas.left,top:n.canvas.top,width:n.canvas.width,height:n.canvas.height>=n.scaleLabelsAreaHeight?n.canvas.height-n.scaleLabelsAreaHeight:0};t._viewCanvas=r,t.slidersContainer.applyOptions({canvas:r,translator:n.translators.x,scale:n.scale,selectedRange:n.selectedRange,sliderMarker:n.sliderMarker,sliderHandle:n.sliderHandle,shutter:n.shutter,behavior:n.behavior,selectedRangeChanged:n.selectedRangeChanged,isEmpty:i}),t.rangeView.applyOptions({canvas:r,translators:n.translators,background:n.background,chart:n.chart,seriesDataSource:n.seriesDataSource,behavior:n.behavior,isEmpty:i}),t.scale.applyOptions({canvas:n.canvas,translator:n.translators.x,scale:n.scale,hideLabels:i,scaleLabelsAreaHeight:n.scaleLabelsAreaHeight,setSelectedRange:n.setSelectedRange})},_draw:function(){var n=this,t,f,o,s,u,i=e(n._options.canvas,n._options.sliderMarkerSpacing),r=n._viewCanvas;n._clipRect=n._renderer.clipRect(i.left,i.top,i.width,i.height),t=n._renderer.g().attr({"class":"rangeContainer",clipId:n._clipRect.id}).append(n._renderer.root),n._viewClipRect=n._renderer.clipRect(r.left,r.top,r.width,r.height),f=n._renderer.g().attr({"class":"view",clipId:n._viewClipRect.id}).append(t),n.rangeView.redraw(f),o=n._renderer.g().attr({"class":"slidersContainer"}).append(t),n.slidersContainer.redraw(o),s=n._renderer.g().attr({"class":"scale"}).append(t),n.scale.redraw(s),u=n._renderer.g().attr({"class":"trackers"}).append(t),n._trackersGroup=u,n.slidersContainer.appendTrackers(u)},_update:function(){var n=this,t=e(n._options.canvas,n._options.sliderMarkerSpacing),i=n._viewCanvas;n._clipRect.attr({x:t.left,y:t.top,width:t.width,height:t.height}),n._viewClipRect.attr({x:i.left,y:i.top,width:i.width,height:i.height}),n.rangeView.redraw(),n.slidersContainer.redraw(),n.slidersContainer.appendTrackers(n._trackersGroup),n.scale.redraw()}}),r.RangeContainer=u}(jQuery,DevExpress),function(n,t,i){function c(n,t,i){for(var r={},e,u,f=0;f<t.length;f++)u=t[f],i.inverted?n<u.posX?r.endValue=u.date:r.startValue||(r.startValue=u.date):n>=u.posX?r.startValue=u.date:r.endValue||(r.endValue=u.date);return r.startValue=r.startValue||i.startValue,r.endValue=r.endValue||i.endValue,r}function v(n,t){var i=new Date(n.getTime()),r=0;switch(t){case"quarter":r=e.getFirstQuarterMonth(n.getMonth());case"month":i.setMonth(r);case"week":case"day":i.setDate(1);case"hour":i.setHours(0,0,0,0);break;case"millisecond":i.setMilliseconds(0);break;case"second":i.setSeconds(0,0);break;case"minute":i.setMinutes(0,0,0)}return i}function l(n,t){var i=t,u,f;if(i==="week"&&(i="day"),i==="quarter"&&(i="month"),n[i])for(f=0;f<r.dateUnitIntervals.length;f++)if(u=r.dateUnitIntervals[f],n[u]&&(n[u]=!1,n.count--),u===i)break}function a(n,t){var i={value:n,valueText:e.format(n,t.format,t.precision)};return String(r.isFunction(t.customizeText)?t.customizeText.call(i,i):i.valueText)}var s=t.viz,u=s.rangeSelector,e=t.formatHelper,r=t.utils,h=r.isDefined,y=5,f,o=u.baseVisualElementMethods;f=function(){o.init.apply(this,arguments)},f.prototype=n.extend({},o,{constructor:f,_setupDateUnitInterval:function(t){var u,o=function(t){var i=0;return n.each(t,function(){return++i<2}),i===1},e,i=t.ticksInfo.majorTickInterval,f=t.ticksInfo.majorTicks;if(t.valueType==="datetime"){if(f&&f.autoArrangementStep>1){r.isString(i)&&(i=r.getDateIntervalByString(i));for(u in i)i.hasOwnProperty(u)&&(i[u]*=f.autoArrangementStep,e=r.convertDateTickIntervalToMilliseconds(i));i=r.convertMillisecondsToDateUnits(e)}this.dateUnitInterval=r.getDateUnitInterval(i)}},_drawDateMarker:function(n,t){var r,u,f,i,e;if(t.x!==null)return i=this._options.scale,this._renderer.path([t.x,t.y,t.x,t.y+i.marker.separatorHeight],"line").attr(this.lineOptions).append(t.group),f=a(n,t.label),r=t.x+i.tick.width+i.marker.textLeftIndent,u=t.y+i.marker.textTopIndent+this.fontOptions["font-size"],this.textOptions.align="left",e=this._renderer.text(f,r,u).attr(this.textOptions).css(this.fontOptions).css(this.textStyles).append(t.group),r+e.getBBox().width},_drawDateMarkers:function(n,t){var c,i,f,o,u,h=-1,s;if(this._options.scale.valueType==="datetime"&&this.visibleMarkers&&(s=[],n.length>1)){for(i=1;i<n.length;i++)f=r.getDatesDifferences(n[i-1],n[i]),l(f,this.dateUnitInterval),f.count>0&&(o=v(n[i],this.dateUnitInterval),u=this.translator.translate(o),u>h&&(u!==null&&s.push({date:o,posX:u}),h=this._drawDateMarker(o,{group:t,y:this._options.canvas.top+this._options.canvas.height-this.markersAreaHeight+this._options.scale.marker.topIndent,x:u,label:this._getLabelFormatOptions(e.getDateFormatByDifferences(f))})));this._initializeMarkersEvents(s,t)}},_getLabelFormatOptions:function(t){return h(this._options.scale.marker.label.format)?this._options.scale.marker.label:n.extend({},this._options.scale.marker.label,{format:t})},_initializeMarkersEvents:function(n,t){var i=this,s=this._options.canvas.top+this._options.canvas.height-this.markersAreaHeight+this._options.scale.marker.topIndent,r,f,h,e,o;if(n.length>0){r=i._renderer.rect(i._options.canvas.left,s,i._options.canvas.width,i._options.scale.marker.separatorHeight).attr({fill:"grey",stroke:"grey",opacity:.0001}).append(t);r.on(u.events.start,function(t){f=u.utils.getRootOffsetLeft(i._renderer),e=u.utils.getEventPageX(t)-f,o=c(e,n,i._options.scale),i._options.setSelectedRange(o)});i._markersTracker=r}},_drawLabel:function(n,t){var i=this._options.canvas.top+this._options.canvas.height-this.markersAreaHeight,r=this._renderer.text(a(n,this._options.scale.label),this.translator.translate(n),i).attr(this.textOptions).css(this.fontOptions).css(this.textStyles);r.append(t)},_drawTick:function(n,t,i){var r=this,f=r._options.canvas.top+r._options.canvas.height-r.scaleLabelsAreaHeight,u=r.translator.translate(n,i),e=r._renderer.path([u,r._options.canvas.top,u,f],"line").attr(r.lineOptions).append(t)},_redraw:function(n){for(var i=this,r=i._options.scale,u=i._renderer.g(),s=i._renderer.g().append(n),f=r.ticksInfo.majorTicks,c=r.ticksInfo.minorTicks,l=r.ticksInfo.customBoundaryTicks,v=i._options.hideLabels||r.isEmpty||!r.label.visible,e=r.type==="discrete",a=e?-1:0,o=r._categoriesInfo,t=0;t<f.length;t++)v||i._drawLabel(f[t],s),i._drawTick(f[t],u,a);if(r.showMinorTicks||e)for(t=0;t<c.length;t++)i._drawTick(c[t],u,a);for(t=0;t<l.length;t++)i._drawTick(l[t],u);e&&o&&h(o.end)&&i._drawTick(o.end,u,1),u.append(n),i._drawDateMarkers(f,s)},_applyOptions:function(n){var t=n.scale,r;this.textOptions={align:"center"},this.textStyles={"-webkit-user-select":"none"},this.fontOptions=s.core.utils.patchFontOptions(t.label.font),this.lineOptions={"stroke-width":t.tick.width,stroke:t.tick.color,"stroke-opacity":t.tick.opacity,sharp:"h"},this._setupDateUnitInterval(t),this.visibleMarkers=t.marker.visible===i?!0:t.marker.visible,r=t.label.visible?t.label.topIndent+this.fontOptions["font-size"]:0,this.scaleLabelsAreaHeight=n.scaleLabelsAreaHeight,this.markersAreaHeight=this.scaleLabelsAreaHeight-r,this.translator=n.translator},_draw:function(n){this._redraw(n)},_update:function(){this._markersTracker&&this._markersTracker.off(u.events.start,"**"),o._update.apply(this,arguments)},_calculateRangeByMarkerPosition:c,_prepareDatesDifferences:l}),u.Scale=f}(jQuery,DevExpress),function(n,t){var r=t.viz.rangeSelector,u=t.viz.renderers;r.rangeSelectorFactory=function(){return{createRangeContainer:function(n){return new r.RangeContainer(n)},createSlidersContainer:function(n){return new r.SlidersContainer(n)},createScale:function(n){return new r.Scale(n)},createSliderMarker:function(n){return new r.SliderMarker(n)},createRangeView:function(n){return new r.RangeView(n)},createThemeManager:function(n){return new r.ThemeManager(n)},createSlider:function(n,t){return new r.Slider(n,t)},createSlidersEventsManager:function(n,t,i){return new r.SlidersEventsManager(n,t,i)},createSlidersController:function(n){return new r.SlidersController(n)}}}()}(jQuery,DevExpress),function(n,t){function f(){var n=this,t;c.init.apply(n,arguments),t=[n._createSlider(v),n._createSlider(y)],n._controller=n._createSlidersController(t),n._eventsManager=n._createSlidersEventsManager(n._controller),n._lastSelectedRange={}}var r=t.viz.rangeSelector,u=t.utils,a=window.navigator.msPointerEnabled||window.navigator.pointerEnabled,e=u.isNumber,o=u.isDate,s=u.isString,v=0,y=1,h=r.utils,c=r.baseVisualElementMethods,l={fill:"grey",stroke:"grey",opacity:.0001};f.prototype=n.extend({},c,{constructor:f,_drawAreaTracker:function(n){var i=this,r,u,t=i._options.canvas;r=i._renderer.rect(t.left,t.top,t.width,t.height).attr(l).append(n),u=i._renderer.rect(t.left,t.top,t.width,t.height).attr(l).css({cursor:"pointer"}).append(n),i._controller.setAreaTrackers(r,u)},dispose:function(){this._eventsManager.dispose(),this._controller.dispose(),this._eventManager=null},_processSelectionChanged:function(n,t){var i=this,f=function(n){return n&&i._lastSelectedRange.startValue===n.startValue&&i._lastSelectedRange.endValue===n.endValue},r=i.getSelectedRange();n&&(i._options.behavior.callSelectedRangeChanged||"").toLowerCase()!=="onmoving"||!i._options.selectedRangeChanged||f(r)||(i._updateLastSelectedRange(r),u.isFunction(i._options.selectedRangeChanged)&&i._options.selectedRangeChanged.call(null,r,t),n||f(r)||i.setSelectedRange(r))},_updateLastSelectedRange:function(n){n=n||this._options.selectedRange,this._lastSelectedRange={startValue:n.startValue,endValue:n.endValue}},_createSlider:function(n){return r.rangeSelectorFactory.createSlider(this._renderer,n)},_createSlidersController:function(n){return r.rangeSelectorFactory.createSlidersController(n)},_createSlidersEventsManager:function(n){var t=this;return r.rangeSelectorFactory.createSlidersEventsManager(t._renderer,n,function(n){t._processSelectionChanged(n)})},getSelectedRange:function(){return this._controller.getSelectedRange()},setSelectedRange:function(n){var i=this,r=i._options.scale,u,f,t=i._options.selectedRange,c=function(n,i){var u=r[n];(e(u)&&e(i)||o(u)&&o(i)||s(u)&&s(i))&&(t[n]=i)};n&&(u=n.startValue,f=n.endValue),c("startValue",u),c("endValue",f),t.startValue=h.truncateSelectedRange(t.startValue,r),t.endValue=h.truncateSelectedRange(t.endValue,r),i._controller.applySelectedRange(t),i._controller.applyPosition(),i._processSelectionChanged(!1,n&&n.blockSelectedRangeChanged)},appendTrackers:function(n){this._controller.appendTrackers(n)},_applyOptions:function(n){var t=this;t._controller.applyOptions({translator:n.translator,canvas:n.canvas,sliderMarker:n.sliderMarker,sliderHandle:n.sliderHandle,shutter:n.shutter,scale:n.scale,behavior:n.behavior}),t._eventsManager.applyOptions({behavior:n.behavior})},_draw:function(n){var t=this,i;a&&(i=t._renderer.root,i&&i.css({msTouchAction:"pinch-zoom"})),t._controller.redraw(n),t._drawAreaTracker(n),t._eventsManager.initialize(),t._update()},_update:function(){var n=this,t=n._options.isEmpty;n._eventsManager.setEnabled(!t),n._controller.applySelectedRange(t?{}:n._options.selectedRange),n._controller.applyPosition(n.isDrawn()),n._updateLastSelectedRange(),n._controller.redraw()}}),r.SlidersContainer=f}(jQuery,DevExpress),function(n,t,i){var e=t.viz.rangeSelector,s=t.utils,h=e.utils,f,r=0,u=1,o="discrete";f=e.SlidersController=function(n){this._sliders=n,n[r].setAnotherSlider(n[u]),n[u].setAnotherSlider(n[r])},f.prototype={constructor:f,setAreaTrackers:function(n,t){this._areaTracker=n,this._selectedAreaTracker=t},applyOptions:function(n){var i=this,t=null,f=i.getSlider(r),e=i.getSlider(u),s=n.scale;i._options=n,f.applyOptions(n),e.applyOptions(n),n.behavior.snapToTicks&&s.type!==o&&(t=s.ticksInfo.fullTicks,t.length>1&&t[0]>t[t.length-1]&&(t=t.reverse())),f.setAvailableValues(t),e.setAvailableValues(t)},processDocking:function(n){var t=this;n!==i?t.getSlider(n).processDocking():(t.getSlider(r).processDocking(),t.getSlider(u).processDocking()),t.setTrackersCursorStyle("default"),t.applyAreaTrackersPosition()},getSelectedRangeInterval:function(){var n=this;return n.getSlider(u).getPosition()-n.getSlider(r).getPosition()},moveSliders:function(n,t){var i=this,u=i.getSlider(r),f;u.setPosition(u.getPosition()+n,!1,t),i.applyPosition(!0)},moveSlider:function(n,t,i,u,f,e){var o=this,s=o.getSlider(n),h=s.getAnotherSlider(),c;s.canSwap()&&(n===r?i>h.getPosition():i<h.getPosition())&&(c=t,t||Math.abs(u)>=Math.abs(f)&&u*f<0&&(c=!0,i+=2*f,e(-f)),c&&(o.swapSliders(),h.applyPosition(!0))),s.setPosition(i,!0),s.applyPosition(!0),o.applyAreaTrackersPosition(),o.setTrackersCursorStyle("w-resize")},applySelectedAreaCenterPosition:function(n){var t=this,i=t.getSlider(r),f=(t.getSlider(u).getPosition()-i.getPosition())/2,e=t.getSelectedRangeInterval();i.setPosition(n-f,!1,e),t.applyPosition(),t.processDocking()},processManualSelection:function(n,t,i){var e=this,o,f,s=[Math.min(n,t),Math.max(n,t)];o=n<t?r:u,f=n<t?u:r,e.getSlider(f).setPosition(s[f]),e.getSlider(o).setPosition(s[o]),e.getSlider(f).setPosition(s[f],!0),e.getSlider(f).startEventHandler(i),e.getSlider(o).processDocking(),e.getSlider(f).applyPosition(!0)},applySelectedRange:function(n){var h=this,f=h._options.scale,l=f.inverted,a=h.getSlider(r),v=h.getSlider(u),t=n.startValue,i=n.endValue,e,c=function(n,t,i){(i?v:a).setValue(n),(i?a:v).setValue(t)};f.type!==o?!l&&t>i||l&&t<i?c(t,i,!0):c(t,i):(e=s.getCategoriesInfo(f._categoriesInfo.categories,t,i),c(e.start,e.end,e.inverted^f.inverted))},getSelectedRange:function(){var n=this;return{startValue:n.getSlider(r).getValue(),endValue:n.getSlider(u).getValue()}},swapSliders:function(){var n=this;n._sliders.reverse(),n.getSlider(r).changeLocation(),n.getSlider(u).changeLocation()},applyAreaTrackersPosition:function(){var n=this,t=n.getSelectedRange(),i=n._options.scale,f=n.getSlider(r),e=n.getSlider(u).getPosition()-f.getPosition(),o={x:f.getPosition(),width:e<0?0:e,y:n._options.canvas.top,height:n._options.canvas.height},s={cursor:i.endValue-i.startValue==t.endValue-t.startValue?"default":"pointer"};n._selectedAreaTracker.attr(o).css(s),n._areaTracker.attr({x:n._options.canvas.left,width:n._options.canvas.width,y:n._options.canvas.top,height:n._options.canvas.height})},applyPosition:function(n){var t=this;t.getSlider(r).applyPosition(n),t.getSlider(u).applyPosition(n),t.applyAreaTrackersPosition()},redraw:function(n){var t=this;t.getSlider(r).redraw(n),t.getSlider(u).redraw(n)},appendTrackers:function(n){var t=this;t._areaTracker&&t._selectedAreaTracker&&(t._areaTracker.append(n),t._selectedAreaTracker.append(n)),t.getSlider(r).appendTrackers(n),t.getSlider(u).appendTrackers(n)},getSlider:function(n){return this._sliders[n]},getAreaTracker:function(){return this._areaTracker},getSelectedAreaTracker:function(){return this._selectedAreaTracker},setTrackersCursorStyle:function(n){var t=this;t._selectedAreaTracker.css({cursor:n}),t._areaTracker.css({cursor:n})},dispose:function(){var n=this._sliders;n[0].dispose(),n[1].dispose()}}}(jQuery,DevExpress),function(n,t,i){var e=t.viz.rangeSelector,p=t.utils,l=10,s=0,a=1,h=t.ui.events.addNamespace,v=function(){var n=window,t="ontouchstart"in n,i=n.navigator.msPointerEnabled,r=n.navigator.pointerEnabled;e.events={start:r?"pointerdown":i?"MSPointerDown":t?"touchstart mousedown":"mousedown",move:r?"pointermove":i?"MSPointerMove":t?"touchmove mousemove":"mousemove",end:r?"pointerup pointercancel":i?"MSPointerUp MSPointerCancel":t?"touchend mouseup":"mouseup"}},c,r=e.utils.getEventPageX,y=0;v();var u=function(n){var r=n||window.event,t=r.originalEvent,f=r.touches,u=t?t.pointerType:!1,e=t?t.touches:!1,o=r.which===i&&r.button===1,s=t&&u!==i&&(u===(t.MSPOINTER_TYPE_TOUCH||"touch")||u===(t.MSPOINTER_TYPE_MOUSE||"mouse")&&t.buttons===1),h=o||r.which===1,c=f&&f.length>0||e&&e.length>0;return h||s||c},o=function(n){var t=n.originalEvent,i=n.touches,r=t?t.touches:!1;return i&&i.length>1||r&&r.length>1||null},f=function(n){return n&&n.type&&n.type.indexOf("touch")===0};c=e.SlidersEventsManager=function(n,t,i){var r=this,u=r._uniqueNS="dx-range-selector_"+y++,f=e.events;r._renderer=n,r._slidersController=t,r._processSelectionChanged=i,r._enabled=!0,r._eventsNames={start:h(f.start,u),move:h(f.move,u),end:h(f.end,u)}},c.prototype={constructor:c,_getRootOffsetLeft:function(){return e.utils.getRootOffsetLeft(this._renderer)},_initializeSliderEvents:function(t){var s=this,v,h=s._slidersController,l=s._processSelectionChanged,i=h.getSlider(t),b=i.getAnotherSlider(),y,c,e,p=function(){e&&(e=!1,h.processDocking(),l(!1))},w=function(n){var k,t,a,p=s._getRootOffsetLeft(),w,b=i.getIndex();v===f(n)&&(!u(n,!0)&&e?(e=!1,h.processDocking(),l(!1)):e&&(o(n)||n.preventDefault(),t=r(n),w=t-c-p,a=t-i.getPosition()-p,h.moveSlider(b,y,w,a,c,function(n){c=n}),l(!0)))},a=s._eventsNames;i.startEventHandler=function(n){s._enabled&&u(n)&&!e&&(y=this===i.getSliderTracker().element,e=!0,v=f(n),c=r(n)-i.getPosition()-s._getRootOffsetLeft(),o(n)||(n.stopPropagation(),n.preventDefault()))};i.on(a.start,i.startEventHandler);n(document).on(a.end,p).on(a.move,w)},_initializeAreaEvents:function(){var t=this,c,o=t._slidersController,s=t._processSelectionChanged,a=o.getAreaTracker(),i=!1,p=!1,e,v=function(n){var u;i&&(u=r(n),t._options.behavior.moveSelectedRangeByClick&&Math.abs(e-u)<l&&o.applySelectedAreaCenterPosition(u-t._getRootOffsetLeft()),i=!1,s(!1))},y=function(n){var h,a,v,y=t._getRootOffsetLeft();c===f(n)&&(i&&!u(n)&&(i=!1,s(!1)),i&&(h=r(n),t._options.behavior.manualRangeSelectionEnabled&&Math.abs(e-h)>=l&&(a=e-y,v=h-y,o.processManualSelection(a,v,n),i=!1,s(!0))))},h=t._eventsNames;a.on(h.start,function(n){t._enabled&&u(n)&&!i&&(i=!0,c=f(n),e=r(n))});n(document).on(h.end,v).on(h.move,y)},_initializeSelectedAreaEvents:function(){var e=this,l,t=e._slidersController,h=e._processSelectionChanged,y=t.getSelectedAreaTracker(),i=!1,a,v,p=function(){i&&(i=!1,t.processDocking(),h(!1))},w=function(n){var e,c;l===f(n)&&(i&&!u(n)&&(i=!1,t.processDocking(),h(!1)),i&&(o(n)||n.preventDefault(),c=r(n),e=c-t.getSlider(s).getPosition()-a,t.moveSliders(e,v),h(!0)))},c=e._eventsNames;y.on(c.start,function(n){e._enabled&&u(n)&&!i&&(i=!0,l=f(n),a=r(n)-t.getSlider(s).getPosition(),v=t.getSelectedRangeInterval(),o(n)||(n.stopPropagation(),n.preventDefault()))});n(document).on(c.end,p).on(c.move,w)},applyOptions:function(n){this._options=n},dispose:function(){n(document).off("."+this._uniqueNS)},initialize:function(){var n=this;n._initializeSelectedAreaEvents(n),n._initializeAreaEvents(),n._initializeSliderEvents(s),n._initializeSliderEvents(a)},setEnabled:function(n){this._enabled=n}}}(jQuery,DevExpress),function(n,t,i){function b(n,t,i){return Math.abs(t-n)<i}function k(n,t,i,r){var u=v(t,n);return u===0||u===n.length-1?i:n[u-r]}function c(n,t){a.init.apply(this,arguments),this._index=t}var u=t.viz.rangeSelector,e=t.utils,s=u.utils,v=n.inArray,y="ontouchstart"in window,p=window.navigator.msPointerEnabled||window.navigator.pointerEnabled,h={duration:250},l=8,w=20,r=0,f=1,o="discrete",a=u.baseVisualElementMethods;c.prototype=n.extend({},a,{constructor:c,_createSlider:function(){var n=this,i,t,r=n._options.sliderHandle;return t=n._renderer.g().attr({"class":"slider",translateX:n._options.canvas.left,translateY:n._options.canvas.top}),i=n._renderer.path([0,0,0,n._options.canvas.height],"line").attr({"class":"dx-range-selector-slider","stroke-width":r.width,stroke:r.color,"stroke-opacity":r.opacity,sharp:"h"}).append(t),t.setValid=function(t){i.attr({stroke:t?n._options.sliderHandle.color:n._options.sliderMarker.invalidRangeColor})},t.updateHeight=function(){i.attr({points:[0,0,0,n._options.canvas.height]})},t.applyOptions=function(n){i.attr(n)},t},_createSliderTracker:function(){var n=this,i=n._options.sliderHandle.width,f=l<i?i:l,r=y||p?w:f,u,t;return t=n._renderer.g().attr({"class":"sliderTracker",translateX:0,translateY:n._options.canvas.top}),u=n._renderer.rect(-r/2,0,r,n._options.canvas.height).attr({fill:"grey",stroke:"grey",opacity:.0001}).css({cursor:"w-resize"}).append(t),t.updateHeight=function(){u.attr({height:n._options.canvas.height})},t},_drawSliderTracker:function(n){var i=this,t=i._createSliderTracker();t&&(t.append(n),i._sliderTracker=t)},_createSliderMarker:function(n){return u.rangeSelectorFactory.createSliderMarker(n)},_setPosition:function(n,t){var i=this,r=i._correctPosition(n),u=i._options.translator.untranslate(r,i._getValueDirection());i.setValue(u,t,!1),i._position=r},_getValueDirection:function(){return this._options.scale.type===o?this.getIndex()===r?-1:1:0},_setPositionForBothSliders:function(n,t){var r=this,h=r.getAnotherSlider(),u,f,o,c=r._options,v=c.scale,y=c.canvas,p=y.left+y.width,l=c.translator,a=r._getValueDirection(),w=h._getValueDirection(),s=function(n,i,u){var f=u?w:a,o=u?a:w;return l.untranslate(r._correctBounds(e.addInterval(l.translate(n,f),t,i)),o)};n=r._correctBounds(n),u=l.untranslate(n,a),f=s(u),o=n+t,o>p?(f=v.endValue,o=p,u=s(f,!0,!0),n=r._correctBounds(o-t)):o=r._correctBounds(o),r._values&&((v.inverted?u>r._values[r._values.length-1]:u<r._values[0])?(u=r._correctByAvailableValues(u,!1),f=s(u)):(f=r._correctByAvailableValues(f,!1),u=s(f,!0))),h.setValue(f,i,!1),r.setValue(u,i,!1),r._position=n,h._position=o},_correctPosition:function(n){var i=this,t=i._correctInversion(n);return t=i._correctBounds(t)},_correctInversion:function(n){var i=this,u=n,t=i.getAnotherSlider().getPosition(),f=i.getIndex()===r?n>t:n<t;return f&&(u=t),u},_correctBounds:function(n){var r=this,i=n,t=r._options.canvas;return n<t.left&&(i=t.left),n>t.left+t.width&&(i=t.left+t.width),i},_correctValue:function(n,t,i){var u=this,r=u._correctByAvailableValues(n,i);return t&&(r=u._correctByMinMaxRange(r)),u._options.scale.type!==o&&(r=u.correctByMinRange(r)),r},_correctByAvailableValues:function(n,t){var i=this._values;return!t&&i?s.findNearValue(i,n):n},_correctByMinMaxRange:function(n){var t=this,u=n,e=t._options.scale,l=t._values,w=t.getIndex(),d=t.getAnotherSlider(),a=d.getValue(),v=!0,h,c,y=e.maxRange,p=e.minRange,g;return e.type===o?(g=e._categoriesInfo,b(t.getPosition(),d.getPosition(),t._options.translator.getInterval()/2)&&(v=!1,u=k(g.categories,n,d.getValue(),w===r?1:-1))):(!e.inverted&&w===r||e.inverted&&w===f?(y&&(h=t._addInterval(a,y,!0)),p&&(c=t._addInterval(a,p,!0))):(y&&(c=t._addInterval(a,y)),p&&(h=t._addInterval(a,p))),c!==i&&u>c?(u=l?s.findLessOrEqualValue(l,c):c,v=!1):h!==i&&u<h&&(u=l?s.findGreaterOrEqualValue(l,h):h,v=!1)),t._setValid(v),u},_addInterval:function(n,t,i){var r,o=this._options.scale.type,u=o==="logarithmic"&&this._options.scale.logarithmBase,f;return u?(f=e.addInterval(e.getLog(n,u),t,i),r=Math.pow(u,f)):r=e.addInterval(n,t,i),r},correctByMinRange:function(n){var u=this,s=u._values,e,o,h=!0,t=u._options.scale,i=n;return t.minRange&&(u.getIndex()===f?(e=u._addInterval(t.startValue,t.minRange,t.inverted),(!t.inverted&&i<e||t.inverted&&i>e)&&(i=e)):u.getIndex()===r&&(o=u._addInterval(t.endValue,t.minRange,!t.inverted),(!t.inverted&&i>o||t.inverted&&i<o)&&(i=o))),i},_applySliderPosition:function(n,t){var i=this,u=i._options.behavior.animationEnabled&&!t,f=i._slider,r={translateX:n,translateY:i._options.canvas.top};u?(f.animate(r,h),i._sliderTracker.animate(r,h)):(i._slider.stopAnimation().attr(r),i._sliderTracker.stopAnimation().attr(r)),i._sliderTracker.updateHeight(),i._slider.updateHeight()},_applyShutterPosition:function(n,t){var e=this,u,o=e._shutter,c=e._options.behavior.animationEnabled&&!t,s=e.getIndex(),i=e._options.canvas;s===r?u={x:i.left,y:i.top,width:n-i.left,height:i.height}:s===f&&(u={x:n+1,y:i.top,width:i.left+i.width-n,height:i.height}),u&&(c?o.animate(u,h):o.stopAnimation().attr(u))},_setValid:function(n){var t=this._marker;t&&t.setValid(n),this._slider.setValid(n)},_setText:function(n){var t=this._marker;t&&t.setText(n)},_update:function(){var n=this,t=n._options,r=t.shutter,i=t.sliderHandle,u=n._marker;u&&u.applyOptions(t.sliderMarker),n._shutter&&n._shutter.attr({fill:r.color,"fill-opacity":r.opacity}),n._slider&&n._slider.applyOptions({"stroke-width":i.width,stroke:i.color,"stroke-opacity":i.opacity})},_draw:function(n){var t=this,i,e,o,u,h,c,s=t.getIndex();o=t._renderer.g().attr({"class":"sliderArea"}).append(n),s===r?u=t._renderer.rect(t._options.canvas.left,t._options.canvas.top,0,t._options.canvas.height):s===f&&(u=t._renderer.rect(t._options.canvas.left,t._options.canvas.top,t._options.canvas.width,t._options.canvas.height)),u&&(u.append(o),i=t._createSlider(),i&&i.append(o),t._options.sliderMarker.visible&&(e=t._createSliderMarker({renderer:t._renderer,isLeftPointer:s===f,sliderMarkerOptions:t._options.sliderMarker}),e.draw(i)),t._shutter=u,t._slider=i,t._marker=e),t._drawSliderTracker(n)},_applyOptions:function(){this._lastPosition=null},getIndex:function(){return this._index},setAvailableValues:function(n){this._values=n},setAnotherSlider:function(n){this._anotherSlider=n},getAnotherSlider:function(){return this._anotherSlider},appendTrackers:function(n){var t=this._sliderTracker;t&&t.append(n)},getSliderTracker:function(){return this._sliderTracker},changeLocation:function(){var n=this,t=n._marker;t&&t.changeLocation(),n._index=n._index===r?f:r,n._options.scale.type===o&&n.setPosition(n._position),n._lastPosition=null},setPosition:function(n,t,u){var f=this,e;u!==i?(e=f.getIndex()===r?f:f.getAnotherSlider(),e._setPositionForBothSliders(n,u)):f._setPosition(n,t)},getPosition:function(){return this._position},setValue:function(n,t,f){var o=this,s=o._options,h=s.canvas;n===i?(o._value=i,o._valuePosition=o._position=o.getIndex()===r?h.left:h.left+h.width,o._setText(u.consts.emptySliderMarkerText)):(o._value=o._correctValue(n,t,e.isDefined(f)?!!f:!0),o._valuePosition=o._position=s.translator.translate(o._value,o._getValueDirection()),o._setText(u.formatValue(o._value,s.sliderMarker)))},getValue:function(){return this._value},canSwap:function(){var t=this,n=t._options.scale,u,f,i;if(t._options.behavior.allowSlidersSwap){if(n.minRange)if(i=t.getAnotherSlider().getValue(),t.getIndex()===r){if(f=t._addInterval(n.endValue,n.minRange,!n.inverted),!n.inverted&&i>f||n.inverted&&i<f)return!1}else if(u=t._addInterval(n.startValue,n.minRange,n.inverted),!n.inverted&&i<u||n.inverted&&i>u)return!1;return!0}return!1},processDocking:function(){var n=this;n._position=n._valuePosition,n.applyPosition(!1),n._setValid(!0)},applyPosition:function(n){var t=this,i=t.getPosition();t._lastPosition!==i&&(t._applySliderPosition(i,n),t._applyShutterPosition(i,n),t._lastPosition=i)},on:function(n,t){var i=this,r=i._marker,u=r&&r.getTracker(),f=i._sliderTracker;f&&f.on(n,t),u&&u.on(n,t)},dispose:function(){var n=this._marker;n&&n.dispose()}}),u.Slider=c}(jQuery,DevExpress),function(n,t){var f=t.viz,e=f.core,s=f.rangeSelector,r,h=75;r=s.SliderMarker=function(t){var i=this;i._renderer=t.renderer,i._text=t.text,i._isLeftPointer=t.isLeftPointer,i._options=n.extend(!0,{},t.sliderMarkerOptions),i._options.textFontStyles=e.utils.patchFontOptions(i._options.font),i._isValid=!0,o(i,{width:10,height:10})};var u=function(n,t){return{width:Math.round(2*n._options.padding+t.width),height:Math.round(2*n._options.padding+t.height)}},o=function(n,t){var i=u(n,t);n._points=n._isLeftPointer?[0,0,i.width,0,i.width,i.height,n._options.pointerSize,i.height,0,i.height+n._options.pointerSize]:[0,0,i.width,0,i.width,i.height+n._options.pointerSize,i.width-n._options.pointerSize,i.height,0,i.height]},c=function(n,t){var i=u(n,t);return n._isLeftPointer?{x:0,y:i.height+n._options.pointerSize}:{x:i.width-1,y:i.height+n._options.pointerSize}},l=function(n){var t=n._label.getBBox();return!n._textHeight&&isFinite(t.height)&&(n._textHeight=t.height),{width:t.width,height:n._textHeight,y:t.y}};r.prototype={constructor:r,draw:function(t){var i=this,r=i._options.padding;i._sliderMarkerGroup=i._renderer.g().attr({"class":"sliderMarker"}).append(t),i._area=i._renderer.path(i.points,"area").attr({fill:i._options.color}).append(i._sliderMarkerGroup),i._label=i._renderer.text(i._text,0,0).attr({align:"left"}).css(n.extend({"-webkit-user-select":"none"},i._options.textFontStyles)).append(i._sliderMarkerGroup),i._tracker=i._renderer.rect(0,0,2*r,2*r+i._options.pointerSize).attr({fill:"grey",stroke:"grey",opacity:.0001}).css({cursor:"pointer"}).append(i._sliderMarkerGroup),i._drawn=!0,i.update()},update:function(n){var t=this,i,r,f;(clearInterval(t._interval),t._interval=null,t._drawn)&&(t._label.attr({text:t._text||""}),i=l(t),n?delete t._textSize:(t._textSize=t._textSize||i,t._textSize=i.width>t._textSize.width||i.height>t._textSize.height?i:t._textSize,i=t._textSize,t._interval=setInterval(function(){t.update(!0)},h)),r=u(t,i),f=c(t,i),t._sliderMarkerGroup.attr({translateX:-f.x,translateY:-f.y}),o(t,i),t._area.attr({points:t._points,fill:t._isValid?t._options.color:t._options.invalidRangeColor}),t._tracker.attr({width:r.width,height:r.height+t._options.pointerSize}),t._label.attr({translateX:t._options.padding,translateY:r.height/2-(i.y+i.height/2)}))},getText:function(){return this._text},setText:function(n){var t=this;t._text!==n&&(t._text=n,t.update())},changeLocation:function(){var n=this;n._isLeftPointer=!n._isLeftPointer,n.update()},applyOptions:function(t){var i=this;i._options=n.extend(!0,{},t),i._options.textFontStyles=e.utils.patchFontOptions(i._options.font),i.update()},getTracker:function(){return this._tracker},setValid:function(n){var t=this;t._isValid=n,t.update()},dispose:function(){clearInterval(this._interval)}}}(jQuery,DevExpress),function(n,t){var u=t.viz.rangeSelector,r,f=u.baseVisualElementMethods;r=function(){f.init.apply(this,arguments)},r.prototype=n.extend({},f,{constructor:r,_draw:function(n){var s=this,c,l,f,u,r,e,i,t=s._options,a,h=t.isEmpty,o=s._renderer;if(e=t.seriesDataSource&&t.seriesDataSource.isShowChart()&&!h,i=t.canvas,e?f=t.seriesDataSource.getBackgroundColor():!h&&t.background.visible&&(f=t.background.color),t.background.visible&&f&&(c=o.rect(i.left,i.top,i.width+1,i.height).attr({fill:f,"class":"dx-range-selector-background"}).append(n)),t.background.visible&&t.background.image&&t.background.image.url&&(l=o.image(i.left,i.top,i.width+1,i.height,t.background.image.url,t.background.image.location).append(n)),e)for(u=t.seriesDataSource.getSeries(),t.seriesDataSource.adjustSeriesDimensions(t.translators,t.chart.useAggregation),r=0;r<u.length;r++)u[r]._extGroups.seriesGroup=n,u[r]._extGroups.labelsGroup=n,u[r].draw(t.translators,t.behavior&&t.behavior.animationEnabled&&o.animationEnabled())}}),u.RangeView=r}(jQuery,DevExpress),function(n,t,i){var o=t.viz.rangeSelector,s=t.viz.charts,u=t.viz.core,e=u.CoreFactory,r=t.utils,f,h=function(n){return s.factory.createThemeManager(n,"rangeSelector.chart")},c=function(t){return n.isArray(t)&&t.length>0&&(r.isNumber(t[0])||r.isDate(t[0]))},l=function(t){return n.map(t,function(n,t){return{arg:n,val:t}})},a=function(t,i,r,u){var o=[],f=[];return n.each(t,function(t,i){n.inArray(i.type,f)===-1&&f.push(i.type)}),n.each(f,function(n,f){var s=new e.createSeriesFamily({type:f,equalBarWidth:i,minBubbleSize:r,maxBubbleSize:u});s.add(t),s.adjustSeriesValues(),o.push(s)}),o},v=function(t){var r=["bar","candlestick","stock","bubble"],i=!0;return t=t.toLowerCase(),n.each(r,function(n,r){if(t.indexOf(r)!==-1)return i=!1,!1}),i};f=o.SeriesDataSource=function(n){var t=this,o,u,i=t.themeManager=h(n.chart),f=i.getOptions("topIndent"),e=i.getOptions("bottomIndent");t._indent={top:f>=0&&f<1?f:0,bottom:e>=0&&e<1?e:0},t._valueAxis=i.getOptions("valueAxisRangeSelector")||{},t._hideChart=!1,u=i.getOptions("seriesTemplate"),n.dataSource&&u&&(o=r.processSeriesTemplate(u,n.dataSource)),t._series=t._calculateSeries(n,o),t._seriesFamilies=a(t._series,i.getOptions("equalBarWidth"),i.getOptions("minBubbleSize"),i.getOptions("maxBubbleSize"))},f.prototype={constructor:f,_calculateSeries:function(t,r){var o=this,a=[],v,y,h,p,g,w=o.themeManager,d=!!w.getOptions("seriesTemplate"),f=d?r:t.chart.series,tt=t.chart.valueAxis&&t.chart.valueAxis.valueType,b,s,k,nt;for(o.teamplateData=[],t.dataSource&&!f&&(c(t.dataSource)&&(t.dataSource=l(t.dataSource)),b=t.dataSourceField||"arg",f={argumentField:b,valueField:b},o._hideChart=!0),f=n.isArray(f)?f:f?[f]:[],o._backgroundColor=t.backgroundColor!==i?t.backgroundColor:w.getOptions("backgroundColor"),s=0;s<f.length;s++)v=n.extend(!0,{incidentOccured:t.incidentOccured},f[s]),v.rotated=!1,h=v.data||t.dataSource,y=w.getOptions("series",v),y.argumentField=y.argumentField||t.dataSourceField,h&&h.length>0&&(k=e.createSeries({renderer:t.renderer},y),a.push(k)),d&&(n.each(h,function(t,i){n.each(k.getTeamplatedFields(),function(n,t){i[t.teamplateField]=i[t.originalField]}),o.teamplateData.push(i)}),k.updateTeamplateFieldNames());for(h=d?o.teamplateData:h,p=[a],p.argumentOptions={categories:t.categories,argumentType:t.valueType,type:t.axisType},p[0].valueOptions={valueType:b?t.valueType:tt},o._dataValidator=u.CoreFactory.createDataValidator(h,p,t.incidentOccured,w.getOptions("dataPrepareSettings")),g=o._dataValidator.validate(),s=0;s<a.length;s++)nt=a[s],nt.updateData(g);return a},adjustSeriesDimensions:function(t,i){var r=this;i&&n.each(r._series||[],function(n,i){i.resamplePoints(t.x)}),n.each(r._seriesFamilies,function(n,i){i.adjustSeriesDimensions({arg:t.x,val:t.y})})},getBoundRange:function(){var f=this,l,a=f._valueAxis.min,y=f._valueAxis.max,t=new u.Range({isValueRange:!0,min:a,minVisible:a,max:y,maxVisible:y,axisType:f._valueAxis.type,base:f._valueAxis.logarithmBase}),o=new u.Range({}),e,s,p,h,c;return n.each(f._series,function(n,i){l=i.getRangeData(),t.addRange(l.val),o.addRange(l.arg),v(i.type)||o.addRange({stick:!1})}),t.isDefined()&&o.isDefined()&&(h=f._valueAxis.inverted?f._indent.top:f._indent.bottom,c=f._valueAxis.inverted?f._indent.bottom:f._indent.top,e=t.max-t.min,s=(n.isNumeric(t.maxVisible)?t.maxVisible:t.max)-(n.isNumeric(t.minVisible)?t.minVisible:t.min),r.isDate(t.min)?t.min=new Date(t.min.valueOf()-e*h):t.min-=e*h,r.isDate(t.max)?t.max=new Date(t.max.valueOf()+e*c):t.max+=e*c,n.isNumeric(s)&&(t.maxVisible=t.maxVisible?t.maxVisible+s*c:i,t.minVisible=t.minVisible?t.minVisible-s*h:i),t.invert=f._valueAxis.inverted),{arg:o,val:t}},getSeries:function(){var n=this;return n._series},getBackgroundColor:function(){var n=this;return n._backgroundColor},isEmpty:function(){var n=this;return n.getSeries().length===0},isShowChart:function(){var n=this;return!n.isEmpty()&&!n._hideChart},getCalculatedValueType:function(){var n=this,t;return n._series.length&&(t=n._series[0].argumentType),t}}}(jQuery,DevExpress),function(n,t){t.viz.rangeSelector.ThemeManager=t.viz.core.BaseThemeManager.inherit({_themeSection:"rangeSelector",_fontFields:["scale.label.font","sliderMarker.font","loadingIndicator.font"],ctor:function(n){this.setTheme(n)},applyRangeSelectorTheme:function(t){var u=this,r=t.chart,f=t.dataSource,i;return delete t.dataSource,delete t.chart,i=n.extend(!0,{},u._theme,t),t.dataSource=i.dataSource=f,r&&(t.chart=i.chart=r),i},setBackgroundColor:function(n){var t=this._theme;n&&(t.containerBackgroundColor=n),t.shutter.color=t.shutter.color||t.containerBackgroundColor}})}(jQuery,DevExpress),DevExpress.MOD_VIZ_RANGESELECTOR=!0}